<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åœ¨çº¿ä¸ªäººç®€å†</title>
    <link rel="stylesheet" href="/css/resumeCSS.css">
</head>
<body>

<!-- é¡¶éƒ¨å¯¼èˆªæ  -->
<header>
    <nav class="navbar">
        <div class="logo">
            <img src="/icon/LogoIcon.svg" alt="Logo">
        </div>
        <ul class="navigation">
            <li><a href="#">é¦–é¡µ</a></li>
            <li><a href="#">ç»„é˜Ÿ</a></li>
            <li><a href="#">äººæ‰</a></li>
            <li><a href="#">ä»»åŠ¡</a></li>
        </ul>
        <div class="search-bar">
            <input type="text" placeholder="æœç´¢...">
            <button type="submit"><img src="/icon/æœç´¢.svg" alt="æœç´¢"></button>
        </div>
        <button class="publish-btn">å‘å¸ƒ</button>
        <div class="login-register">
            <a href="#">ç™»å½• / æ³¨å†Œ</a>
        </div>
        <div class="navbar-menu" id="sidebarToggle">
            <img src="/icon/èœå•_o.svg" alt="èœå•">
        </div>
    </nav>
</header>
<!--ä¸»ä½“æ¿å—-->
<div id="main-block">
    <!--å·¦ä¾§æ -->
    <div id="left-block">
        <div id="left1">
            <div id="left1-title" class="center">
                <span>ç®€å†ç›®å½•</span>
            </div>
            <a >
                <div id="left1-button2" class="center">æœŸæœ›èŒä½</div>
            </a>
            <a >
                <div id="left1-button3" class="center">ä¸ªäººä¼˜åŠ¿</div>
            </a>
            <a >
                <div id="left1-button5" class="center">ä¸ªäººç»å†</div>
            </a>
        </div>
    </div>
    <!--ä¸­é—´ç®€å†éƒ¨åˆ†-->
    <div id="middle-block">
        <div id="middle1">
            <div id="middle1-title">
                <span>æˆ‘çš„åœ¨çº¿ç›®å½•</span>
                <a href="edit.html"><button>ç¼–è¾‘</button></a>
                <a href="showResume.html"><button>é¢„è§ˆ</button></a>
            </div>
            <!-- åŸºæœ¬ä¿¡æ¯ -->
            <div class="profile">
                <div class="info">
                    <h1 id="name"></h1>
                    <div class="contact">
                        <span class="icon">ğŸ“</span>
                        <span id="school"></span>
                    </div>
                    <div class="contact">
                        <span class="icon">ğŸ“</span>
                        <span id="major"></span>
                    </div>
                    <div class="contact">
                        <span class="icon">ğŸ“</span>
                        <span id="phone"></span>
                    </div>
                    <div class="contact">
                        <span class="icon">âœ‰ï¸</span>
                        <span id="email"></span>
                    </div>

                </div>
            </div>
            <!-- ç®€å†ä¿¡æ¯ -->
            <div class="sections">
                <div class="section">
                    <h3>æœŸæœ›èŒä½</h3>
                </div>
                <div id="desired-position" class="detailInfo"></div>
                <div class="section">
                    <h3>ä¸ªäººä¼˜åŠ¿</h3>
                </div>
                <div id="personal-strengths" class="detailInfo"></div>
                <div class="section">
                    <h3>ä¸ªäººç»å†</h3>
                </div>
                <div id="personal-experience" class="detailInfo"></div>
            </div>
        </div>
    </div>
    <!--å³ä¾§æ -->
    <div id="right-block">
        <div id="right1">
            <div id="right1-title" class="center">
                <span>æˆ‘çš„ç®€å†</span>
            </div>

        </div>
        <div id="right2">
            <div id="right2-title" class="center">
                <span>å·²æŠ•ç®€å†</span>
            </div>
        </div>
    </div>
</div>
<script>
    document.addEventListener('DOMContentLoaded', async function () {

      // è·å– localStorage ä¸­çš„ authToken
        const authToken = localStorage.getItem('authToken');

      // å‘é€è¯·æ±‚è·å–åŸºæœ¬ä¿¡æ¯
      try {
        const InfoResponse = await fetch('/resume/lastInfo',{
                method: 'GET',
                headers:{
                    'token' :authToken
                }
        });

        if (InfoResponse.ok) {
          const Info = await InfoResponse.json();
          const resumeData = Info.data;

          // å¤„ç†å§“åå±•ç¤ºï¼Œæ·»åŠ é»˜è®¤å€¼é€»è¾‘
          const nameElement = document.getElementById('name');
          if (nameElement) {
            nameElement.textContent = resumeData.name || 'æš‚æ— å§“åä¿¡æ¯';
          }

          // å¤„ç†å­¦æ ¡ä¿¡æ¯å±•ç¤º
          const schoolElement = document.getElementById('school');
          if (schoolElement) {
            schoolElement.textContent = resumeData.school || 'æš‚æ— å­¦æ ¡ä¿¡æ¯';
          }

          // å¤„ç†ä¸“ä¸šä¿¡æ¯å±•ç¤º
          const majorElement = document.getElementById('major');
          if (majorElement) {
            majorElement.textContent = resumeData.major || 'æš‚æ— ä¸“ä¸šä¿¡æ¯';
          }

          // å¤„ç†ç”µè¯å·ç å±•ç¤º
          const phoneElement = document.getElementById('phone');
          if (phoneElement) {
            phoneElement.textContent = resumeData.phoneNumber || 'æš‚æ— ç”µè¯å·ç ';
          }

          // å¤„ç†é‚®ç®±ä¿¡æ¯å±•ç¤º
          const emailElement = document.getElementById('email');
          if (emailElement) {
            emailElement.textContent = resumeData.email || 'æš‚æ— é‚®ç®±ä¿¡æ¯';
          }

          // å¤„ç†æœŸæœ›èŒä½ä¿¡æ¯å±•ç¤º
          const desiredPositionElement = document.getElementById('desired-position');
          if (desiredPositionElement) {
            desiredPositionElement.textContent = resumeData.desiredPosition || 'æš‚æ— æœŸæœ›èŒä½ä¿¡æ¯';
          }

          // å¤„ç†ä¸ªäººä¼˜åŠ¿ä¿¡æ¯å±•ç¤º
          const personalStrengthsElement = document.getElementById('personal-strengths');
          if (personalStrengthsElement) {
            personalStrengthsElement.textContent = resumeData.personalStrengths || 'æš‚æ— ä¸ªäººä¼˜åŠ¿ä¿¡æ¯';
          }

          // å¤„ç†ä¸ªäººç»å†ä¿¡æ¯å±•ç¤º
          const personalExperienceElement = document.getElementById('personal-experience');
          if (personalExperienceElement) {
            personalExperienceElement.textContent = resumeData.previousExperience || 'æš‚æ— ä¸ªäººç»å†ä¿¡æ¯';
          }
        } else {
          console.error('è·å–åŸºæœ¬ä¿¡æ¯å¤±è´¥:',InfoResponse.statusText);
        }
      } catch (error) {
        console.error('ç½‘ç»œé”™è¯¯ï¼ˆè·å–åŸºæœ¬ä¿¡æ¯ï¼‰:', error);
      }
    });
</script>
</body>

</html>